!function(e){function t(r){if(o[r])return o[r].exports;var i=o[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r=window.webpackJsonp;window.webpackJsonp=function(o,s){for(var n,a,c=0,l=[];c<o.length;c++)a=o[c],i[a]&&l.push.apply(l,i[a]),i[a]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);for(r&&r(o,s);l.length;)l.shift().call(null,t)};var o={},i={9:0,1:0};return t.e=function(e,r){if(0===i[e])return r.call(null,t);if(void 0!==i[e])i[e].push(r);else{i[e]=[r];var o=document.getElementsByTagName("head")[0],s=document.createElement("script");s.type="text/javascript",s.charset="utf-8",s.async=!0,s.src=t.p+""+e+"."+({}[e]||e)+".js",o.appendChild(s)}},t.m=e,t.c=o,t.p="/",t(0)}([function(e,t,r){"use strict";r(44);var o=r(14),i=(new o,r(28)),s=r(46),n=r(49),a=r(52),c=r(24),l=r(16),p=(new i({elem:document.getElementById("user-menu"),className:"header-element"}),new s({elem:document.getElementById("social-collection")}),new n({elem:document.getElementById("upload-avatar-section")}),new a({elem:document.getElementById("description-add-section")}),new c({elem:document.forms["change-password"],fields:{"old-password":{validator:"non-empty",alias:"old password"},"new-password":{validator:"password",alias:"new password"},"new-again":{validator:"password-again",alias:"new password",password:"new-password",extra:!0}},url:"/settings"}));p.on("form_sent",function(e){var t=new l({message:"Password has been successfully changed"});t.show()})},,,,,,,,,,,,,,function(e,t,r){"use strict";var o=function(e){var t=this;document.addEventListener("error",function(e){var r=e.detail;t.call(r)})};o.prototype.call=function(e){r.e(1,function(t){var o=r(15).ComponentError,i=r(16);if(!(e instanceof o))throw e;if(401===e.status)localStorage.setItem("redirected_url",window.location.href),window.location="/authorization";else{var s=new i({message:e.message});s.activate()}})},e.exports=o},function(e,t){"use strict";function r(e){this.name="CustomError",this.message=e,Error.captureStackTrace?Error.captureStackTrace(this,r):this.stack=Error().stack}function o(e,t){r.call(this,e||"An error has occurred"),this.name="ComponentError",this.status=t}function i(e,t,r){o.call(this,e||"An error has occurred. Check if javascript is enabled",r),this.name="ClientError",this.detail=t}function s(e){i.call(this,e||"Image not found. It probably has been removed",null,404),this.name="ImageNotFound"}function n(e,t){o.call(this,e||"There is some error on the server side",t),this.name="ServerError"}r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,o.prototype=Object.create(r.prototype),o.prototype.constructor=o,i.prototype=Object.create(o.prototype),i.prototype.constructor=i,s.prototype=Object.create(i.prototype),s.prototype.constructor=s,n.prototype=Object.create(o.prototype),n.prototype.constructor=n,e.exports={ComponentError:o,ClientError:i,ImageNotFound:s,ServerError:n}},function(e,t,r){"use strict";var o=r(17),i=function(e){o.apply(this,arguments),this.elem=null,this.elemId="message-modal-window",this.caption=e&&e.caption||"message",this.message=e&&e.message||"You were not suppose to see this! Seems like something is broken :("};i.prototype=Object.create(o.prototype),i.prototype.constructor=i,i.prototype.setElem=function(){var e=this;this.setWindowHtml(),this.elem=document.getElementById(this.elemId),this.elem||(this.elem=this.renderWindow(this.windowHtml)),this.setListeners(),this.elem.querySelector(".header").textContent=this.caption,this.elem.querySelector(".message-modal-window__message").textContent=this.message,this.elem.onclick=function(t){e.onElemClick(t),t.target.matches(".message-modal-window__ok-button")&&e.deactivate()}},i.prototype.setWindowHtml=function(){this.windowHtml=r(21)},i.prototype.show=function(){o.prototype.show.apply(this),this.elem||this.setElem(),this.elem.classList.remove("window_invisible")},i.prototype.hide=function(){o.prototype.hide.apply(this),this.elem.classList.add("window_invisible")},e.exports=i},function(e,t,r){"use strict";var o=r(18),i=r(19),s=function e(t){this.active=!1,this.listeners=[],this.status=t&&t.status||e.statuses.MINOR};s.statuses={MAJOR:1,MINOR:2},s.prototype.onElemClick=function(e){e.target.matches(".modal-close-button")&&this.deactivate()},s.prototype.setListeners=function(){var e=this;this.listeners.forEach(function(t){e.elem.addEventListener(t.eventName,t.cb)})},s.setBackdrop=function(e){e===s.statuses.MINOR?(s.minorBackdrop=document.getElementById("backdrop_minor"),s.minorBackdrop||(s.minorBackdrop=s.renderBackdrop("minor"))):(s.majorBackdrop=document.getElementById("backdrop_major"),s.majorBackdrop||(s.majorBackdrop=s.renderBackdrop("major")))},s.setWrapper=function(e){e===s.statuses.MINOR?(s.minorWrapper=document.getElementById("modal-wrapper-minor"),s.minorWrapper||(s.minorWrapper=s.renderWrapper("minor")),s.minorWrapper.onclick=function(e){e.target&&!e.target.classList.contains("modal-wrapper_minor")||s.minorActive&&s.minorQueue[0].deactivate()}):(s.majorWrapper=document.getElementById("modal-wrapper-major"),s.majorWrapper||(s.majorWrapper=s.renderWrapper("major")),s.majorWrapper.onclick=function(e){e.target&&!e.target.classList.contains("modal-wrapper_major")||s.majorActive&&s.majorQueue[0].deactivate()})},s.renderBackdrop=function(e){var t=document.createElement("DIV");return t.className="backdrop backdrop_invisible",t.classList.add("backdrop_"+e),t.id="backdrop-"+e,document.body.appendChild(t),t},s.renderWrapper=function(e){var t=document.createElement("DIV");return t.className="modal-wrapper modal-wrapper_invisible",t.classList.add("modal-wrapper_"+e),t.id="modal-wrapper-"+e,document.body.appendChild(t),t},s.prototype.renderWindow=function(e){var t=document.createElement("DIV");t.innerHTML=e;var r=t.firstElementChild;return this.status===s.statuses.MINOR?s.minorWrapper.appendChild(r):s.majorWrapper.appendChild(r),t.remove(),r},s.prototype.show=function(){this.status===s.statuses.MINOR?(s.minorBackdrop||s.setBackdrop(s.statuses.MINOR),s.minorWrapper||s.setWrapper(s.statuses.MINOR),s.minorWrapper.classList.remove("modal-wrapper_invisible"),s.minorBackdrop.classList.remove("backdrop_invisible")):(s.majorBackdrop||s.setBackdrop(s.statuses.MAJOR),s.majorWrapper||s.setWrapper(s.statuses.MAJOR),s.majorWrapper.classList.remove("modal-wrapper_invisible"),s.majorBackdrop.classList.remove("backdrop_invisible")),this.active=!0},s.prototype.activate=function(e){var t=this;return"spinner"===this.elemId&&!function(){var e=t;t.on("spinner_host-loaded",function(r){var o=r.detail.host;t.status===s.statuses.MINOR?s.minorQueue.splice(s.minorQueue.indexOf(e)+1,0,o):s.majorQueue.splice(s.majorQueue.indexOf(e)+1,0,o),e.deactivate(r.detail.options)})}(),new Promise(function(r,o){t.status===s.statuses.MINOR?(s.minorQueue.push(t),s.minorActive?r():s.minorShow(e).then(function(){r()})):(s.majorQueue.push(t),s.majorActive?r():s.majorShow(e).then(function(){r()}))})},s.prototype.hide=function(){this.status===s.statuses.MINOR?(s.minorWrapper.classList.add("modal-wrapper_invisible"),s.minorBackdrop.classList.add("backdrop_invisible")):(s.majorWrapper.classList.add("modal-wrapper_invisible"),s.majorBackdrop.classList.add("backdrop_invisible"))},s.prototype.deactivate=function(e,t){this.hide(t),this.active=!1,this.status===s.statuses.MINOR?(s.minorActive=!1,s.minorQueue.shift(),s.minorShow(e)):(s.majorActive=!1,s.majorQueue.shift(),s.majorShow(e)),this.trigger("modal-window_deactivated")},s.minorActive=!1,s.majorActive=!1,s.minorQueue=[],s.majorQueue=[],s.spinner=new i,s.spinner.status=s.statuses.MAJOR,s.showSpinner=function(){s.prototype.show.call(s.spinner),s.spinner.elem||(s.spinner.elem=document.getElementById("spinner")),s.spinner.elem||(s.spinner.elem=s.prototype.renderWindow.call(s.spinner,i.html)),s.spinner.show()},s.hideSpinner=function(){s.spinner.hide()},s.minorShow=function(e){var t=s.minorQueue[0];if(t){var r=t.show(e);return r?r.then(function(){s.minorActive=!0}):(s.minorActive=!0,Promise.resolve())}return s.minorActive=!1,Promise.resolve()},s.majorShow=function(e){var t=s.majorQueue[0];if(t){s.showSpinner();var r=t.show(e);return r?r.then(function(){s.majorActive=!0,s.hideSpinner()}):(s.majorActive=!0,s.hideSpinner(),Promise.resolve())}return s.majorActive=!1,Promise.resolve()};for(var n in o)s.prototype[n]=o[n];e.exports=s},function(e,t){"use strict";e.exports={on:function(e,t){this.elem?this.elem.addEventListener(e,t):this.listeners.push({eventName:e,cb:t})},trigger:function(e,t){this.elem.dispatchEvent(new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:t}))},error:function(e){this.elem.dispatchEvent(new CustomEvent("error",{bubbles:!0,cancelable:!0,detail:e}))}}},function(e,t,r){"use strict";var o=function(e){this.elem=document.getElementById("spinner")};o.html=r(20),o.prototype.show=function(){this.elem.classList.remove("spinner_invisible")},o.prototype.hide=function(){this.elem.classList.add("spinner_invisible")},e.exports=o},function(e,t){e.exports="<div id=spinner class=spinner> </div>"},function(e,t){e.exports='<div class="window modal window_invisible modal-window message-modal-window" id=message-modal-window> <div class="header window__header"> </div> <div class="panel window__panel"> <div class=message-modal-window__message> </div> <div class="button message-modal-window__ok-button">OK</div> </div> <div class="icon-cross modal-close-button"></div></div>'},,function(e,t){"use strict";function r(e,t){var r=void 0;for(e=e||n.plain,t=t||"this property";~(r=e.indexOf(s));)e=e.substring(0,r)+t+e.substring(r+s.length);return e}function o(e){if(!Array.isArray(e)){var t=[];for(var o in e)t.push({property:o,value:e[o]});e=t}for(var i=[],s=function(t){var o=e[t].validator;if(o||(o=e[t].property),!l[o])throw Error("no validator for this property: "+o);l[o].checks.forEach(function(s){s.test(e[t].value,e[t],e)||i.push({property:e[t].property,message:r(s.errorMessage,e[t].alias||e[t].property||o)})})},n=0;n<e.length;n++)s(n);return i}function i(e,t){var r=!0;return l[e].checks.forEach(function(e){e.test(t)||(r=!1)}),r}var s="[property]",n={plain:"incorrect [property]",empty:"[property] must not be empty",tooBig:function(e){return e?"[property] must be lower than "+(e+1)+" symbols":"[property] is too big"},tooSmall:function(e){return e?"[property] must be greater than "+(e-1)+" symbols":"[property] is too short"}},a={regExp:function(e,t){return e.test(t)},max:function(e,t){return t.length<=e},min:function(e,t){return t.length>=e},nonEmpty:function(e){return e.length>0}},c={max:function(e,t){return{errorMessage:t||n.tooBig(e),test:a.max.bind(null,e)}},min:function(e,t){return{errorMessage:t||n.tooSmall(e),test:a.min.bind(null,e)}},nonEmpty:function(e){return{errorMessage:e||n.empty,test:a.nonEmpty}}},l={"non-empty":{checks:[c.nonEmpty()]},email:{checks:[c.nonEmpty(),c.max(100,n.tooBig()),c.min(6,n.tooSmall()),{test:a.regExp.bind(null,/^(\w+[-\.]??)+@[\w.-]+\w\.\w{2,5}$/i)}]},username:{checks:[c.nonEmpty(),c.max(30),c.min(5),{errorMessage:"must only contain alphanumeric symbols",test:a.regExp.bind(null,/^[A-Z0-9-]+$/i)}]},password:{checks:[c.nonEmpty(),c.max(30),c.min(5),{errorMessage:"[property] is too weak",test:a.regExp.bind(null,/(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,}/)}]},"password-again":{checks:[c.nonEmpty("re-enter [property]"),{errorMessage:"passwords do not match",test:function(e,t,r){var o=t.password;if(!o)throw Error("no original password reference");for(var i=0;i<r.length;i++)if(r[i].property===o)return e===r[i].value;throw Error("no orginal password data")}}]},url:{checks:[{test:function(e){var t="^(?!mailto:)(?:(?:http|https)://)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$",r=RegExp(t,"i");return e.length<2083&&r.test(e)}}]},description:{checks:[c.max(255)]},comment:{checks:[c.nonEmpty(),c.max(255)]}};e.exports={getErrorArray:o,testProperty:i}},function(e,t,r){"use strict";var o=r(18),i=r(23).getErrorArray,s=r(15).ClientError,n=function(e){var t=this;this.elem=e.elem,this.fields=e.fields,this.url=e.url,this.isAvailable=!0,this.saveButton=this.elem.querySelector(".save-button"),this.elem.onclick=function(e){if(t.isAvailable&&e.target===t.saveButton){t.clearErrorBoxes();var r=t.getErrors();0===r.length?t.send(t.getBody()):t.setErrors(r)}}};n.prototype.setPropertyError=function(e,t){this.getErrorBox(e).textContent=t},n.prototype.getErrorBox=function(e){return this.elem[e].parentElement.querySelector(".textbox__error")},n.prototype.setAvailable=function(e){this.isAvailable=e},n.prototype.getDataObj=function(){var e=[];for(var t in this.fields){var r=this.fields[t];r.noValidation||(r.property||(r.property=t),r.value=this.elem[t].value,e.push(r))}return e},n.prototype.send=function(e){var t=this;r(25)(e,"POST",this.url,function(e,r){return e?void(e instanceof s&&e.detail?t.setPropertyError(e.detail.property,e.message):t.error(e)):(t.clear(),void t.trigger("form_sent",{response:r}))})},n.prototype.clearErrorBoxes=function(){for(var e in this.fields)this.getErrorBox(e).textContent=""},n.prototype.clear=function(){this.clearErrorBoxes();for(var e in this.fields)this.elem[e].value=""},n.prototype.getErrors=function(){return i(this.getDataObj())},n.prototype.setErrors=function(e){this.clearErrorBoxes();for(var t=0;t<e.length;t++)""==this.getErrorBox(e[t].property).textContent&&this.setPropertyError(e[t].property,e[t].message)},n.prototype.getBody=function(){var e="";for(var t in this.fields)this.fields[t].extra||(e+=(""===e?"":"&")+t+"="+encodeURIComponent(this.elem[t].value));return e};for(var a in o)n.prototype[a]=o[a];e.exports=n},function(e,t,r){"use strict";var o=r(15).ServerError,i=r(15).ClientError;e.exports=function(e,t,r,s){var n="";if("string"!=typeof e)for(var a in e){var c="";e[a]&&(c=a+"="+encodeURIComponent("object"==typeof e[a]?JSON.stringify(e[a]):e[a])),c&&(n+=(""===n?"":"&")+c)}else n=e;var l=new XMLHttpRequest;l.open(t,r,!0),l.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),l.setRequestHeader("X-Requested-With","XMLHttpRequest"),l.onreadystatechange=function(){if(4==this.readyState){var e=void 0;if(!this.responseText)return void s(new o("Server is not responding"));e=JSON.parse(this.responseText),this.status>=200&&this.status<300&&s(null,e),this.status>=400&&this.status<500&&s(new i(e.message,e.detail,this.status)),this.status>=500&&s(new o(e.message,this.status))}},l.send(n)}},,,function(e,t){"use strict";var r=function(e){var t=this;this.elem=e.elem,this.itemList=this.elem.querySelector(".dropdown__item-list"),this.className=e.className,this.active=!1,document.body.addEventListener("click",function(e){t.itemList.contains(e.target)||(t.elem.contains(e.target)?t.toggle():t.active&&t.deactivate())},!1),this.AEHandler=this.AEHandler.bind(this)};r.prototype.show=function(){this.elem.classList.remove("dropdown_invisible"),this.elem.classList.add(this.className+"_active"),this.active=!0},r.prototype.deactivate=function(){this.itemList.addEventListener("animationend",this.AEHandler,!1),this.elem.classList.add("dropdown_fading-out")},r.prototype.AEHandler=function(){this.elem.classList.remove("dropdown_fading-out"),this.elem.classList.add("dropdown_invisible"),this.elem.classList.remove(this.className+"_active"),this.active=!1,this.itemList.removeEventListener("animationend",this.AEHandler)},r.prototype.toggle=function(){this.active?this.deactivate():this.show()},e.exports=r},,,,,,,,,,,,,,,,function(e,t){},,function(e,t,r){"use strict";var o=r(18),i=function(e){var t=this;this.elem=e.elem,this.socialList=this.elem.querySelector(".social-collection__social-list"),this.textbox=this.elem.querySelector(".textbox__field"),this.elem.onclick=function(e){return e.target.matches(".textbox-button__button")&&t.textbox.value?void t.sendSocial(t.textbox.value):void(e.target.matches(".social__close")&&t.deleteSocial(e.target.closest(".social")))}};i.prototype.sendSocial=function(e){var t=this;r(25)({link:e},"POST","/settings",function(e,r){return e?void t.error(e):(t.insertNewSocial(r.linkObj),void(t.textbox.value=""))})},i.prototype.deleteSocial=function(e){var t=this;r(25)({link:e.dataset.link},"DELETE","/settings",function(r,o){return r?void t.error(r):void e.remove()})},i.prototype.insertNewSocial=function(e){var t=r(47)(r(48));t.dataset.link=e.href,t.querySelector(".social__link").setAttribute("href",e.href),t.querySelector(".social__host").textContent=e.host,this.socialList.appendChild(t)};for(var s in o)i.prototype[s]=o[s];e.exports=i},function(e,t){"use strict";e.exports=function(e){var t=document.createElement("DIV");t.innerHTML=e;var r=t.firstElementChild;return r}},function(e,t){e.exports='<div class="social-collection__social social" data-link=""> <a class=social__link href=""> <div class="social__icon icon-sphere"></div> <span class=social__host></span> </a> <div class="social__close icon-cross"></div> </div>'},function(e,t,r){"use strict";var o=r(18),i=r(50),s=(r(15).ClientError,function(e){var t=this;this.elem=e.elem,this.uploadButton=this.elem.querySelector(".upload-avatar-section__upload-button"),this.deleteButton=this.elem.querySelector(".upload-avatar-section__delete-button"),this.filePicker=new i({elem:this.elem.querySelector(".file-picker")}),this.avatar=this.elem.querySelector(".upload-avatar-section__avatar"),this.elem.onclick=function(e){if(e.target===t.uploadButton){var r=t.filePicker.getFile();r&&t.uploadAvatar(r)}e.target===t.deleteButton&&t.deleteAvatar()}});s.prototype.deleteAvatar=function(){var e=this;r(25)(null,"DELETE","/avatar",function(t,r){return t?void e.error(t):void(e.avatar.style.backgroundImage="")})},s.prototype.uploadAvatar=function(e){var t=this,o=new FormData;o.append("avatar",e),r(51)("/avatar",o,function(e,r){return e?void t.error(e):void(t.avatar.style.backgroundImage="url('"+r.url+"?"+(new Date).getTime()+"')")})};for(var n in o)s.prototype[n]=o[n];e.exports=s},function(e,t){"use strict";var r=23,o="no file chosen",i=function(e){var t=this;this.fileNameLength=e.fileNameLength||r,this.uploadInput=document.createElement("input"),this.uploadInput.type="file",this.uploadInput.accept="image/*",this.elem=e.elem,this.fpButton=this.elem.querySelector(".file-picker__button"),this.fpFileName=this.elem.querySelector(".file-picker__filename"),this.fpButton.addEventListener("click",function(e){t.uploadInput.click()}),this.uploadInput.addEventListener("change",function(e){t.setVisibleFileName()})};i.prototype.setVisibleFileName=function(){var e=this.uploadInput.value.substring(this.uploadInput.value.lastIndexOf("\\")+1),t=void 0,r=~~((this.fileNameLength-1)/2);0===e.length?t=o:e.length<=this.fileNameLength?(this.fpFileName.title="",t=e):(this.fpFileName.title=e,t=e.slice(0,r)+"…"+e.slice(-r)),this.fpFileName.textContent=t},i.prototype.getFile=function(){return this.uploadInput.files[0]},i.prototype.clear=function(){this.uploadInput.value="",this.fpFileName.textContent=o},e.exports=i},function(e,t,r){"use strict";var o=r(15).ServerError,i=r(15).ClientError;e.exports=function(e,t,r){var s=new XMLHttpRequest;s.upload.onprogress=function(e){},s.onload=s.onerror=function(){var e=void 0;return this.responseText?(e=JSON.parse(this.responseText),this.status>=200&&this.status<300&&r(null,e),this.status>=400&&this.status<500&&r(new i(e.message)),void(this.status>=500&&r(new o(e.message)))):void r(new o("Server is not responding"))},s.open("POST",e,!0),s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.send(t)}},function(e,t,r){"use strict";var o=r(18),i=r(15).ClientError,s=r(16),n=function(e){var t=this;this.elem=e.elem,this.saveButton=this.elem.querySelector(".button"),this.textarea=this.elem.querySelector(".textarea textarea"),this.elem.onclick=function(e){if(e.target===t.saveButton){var o=t.textarea.value,s=r(23).getErrorArray({description:o});0===s.length?t.sendDescription(t.textarea.value):t.error(new i(s[0].message))}}};n.prototype.sendDescription=function(e){var t=this;r(25)({description:e},"POST","/settings",function(e,r){if(e)return void t.error(e);var o=new s({message:"Description has been successfully changed"});o.show()})};for(var a in o)n.prototype[a]=o[a];e.exports=n}]);