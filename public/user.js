!function(e){function t(r){if(o[r])return o[r].exports;var i=o[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r=window.webpackJsonp;window.webpackJsonp=function(o,n){for(var s,a,c=0,p=[];c<o.length;c++)a=o[c],i[a]&&p.push.apply(p,i[a]),i[a]=0;for(s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s]);for(r&&r(o,n);p.length;)p.shift().call(null,t)};var o={},i={10:0};return t.e=function(e,r){if(0===i[e])return r.call(null,t);if(void 0!==i[e])i[e].push(r);else{i[e]=[r];var o=document.getElementsByTagName("head")[0],n=document.createElement("script");n.type="text/javascript",n.charset="utf-8",n.async=!0,n.src=t.p+""+e+"."+({}[e]||e)+".js",o.appendChild(n)}},t.m=e,t.c=o,t.p="/",t(0)}({0:function(e,t,r){"use strict";function o(){return new Promise(function(e,t){r.e(13,function(t){var o=r(30);h=new o({gallery:v,isLogged:window.isLogged,preloadEntityCount:1,isEmbedded:!0,publicationNumberElem:document.getElementById("publication-number"),userSubscribeButton:l}),e()})})}r(53);var i=r(14),n=new i,s=r(15).ClientError,a=r(28),c=r(17),p=r(29),d=(r(18),void 0),l=void 0;(d=document.getElementById("subscribe-button"))&&(window.isLogged?r.e(11,function(e){var t=r(39);l=new t({elem:d,counterElem:document.getElementById("subscribers-number")})}):d.onclick=function(e){n.call(new s(null,null,401))});var m=void 0,u=void 0;(m=document.getElementById("upload-window-caller"))&&(m.onclick=function(){u?u.activate():!function(){var e=new p({status:c.statuses.MAJOR});e.activate(),r.e(12,function(t){var i=r(55);u=new i,u.on("upload-image-modal-window__image-uploaded",function(e){h?h.insertNewImagePreview(e.detail.imageId,e.detail.previewUrl):o().then(function(){h.insertNewImagePreview(e.detail.imageId,e.detail.previewUrl)})}),e.onHostLoaded(u)})}()});var h=void 0,v=document.getElementById("gallery");if(v.onclick=function(e){var t=void 0;if(t=e.target.closest(".image-preview")){var r=new p({status:c.statuses.MAJOR});r.activate(),e.preventDefault();var i=+t.dataset.id;o().then(function(){r.onHostLoaded(h,{imageId:i})})}},window.isLogged){new a({elem:document.getElementById("user-menu"),className:"header-element"})}},14:function(e,t,r){"use strict";var o=function(e){var t=this;document.addEventListener("error",function(e){var r=e.detail;t.call(r)})};o.prototype.call=function(e){r.e(1,function(t){var o=r(15).ComponentError,i=r(16);if(!(e instanceof o))throw e;if(401===e.status)localStorage.setItem("redirected_url",window.location.href),window.location="/authorization";else{var n=new i({message:e.message});n.activate()}})},e.exports=o},15:function(e,t){"use strict";function r(e){this.name="CustomError",this.message=e,Error.captureStackTrace?Error.captureStackTrace(this,r):this.stack=Error().stack}function o(e,t){r.call(this,e||"An error has occurred"),this.name="ComponentError",this.status=t}function i(e,t,r){o.call(this,e||"An error has occurred. Check if javascript is enabled",r),this.name="ClientError",this.detail=t}function n(e){i.call(this,e||"Image not found. It probably has been removed",null,404),this.name="ImageNotFound"}function s(e,t){o.call(this,e||"There is some error on the server side",t),this.name="ServerError"}r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,o.prototype=Object.create(r.prototype),o.prototype.constructor=o,i.prototype=Object.create(o.prototype),i.prototype.constructor=i,n.prototype=Object.create(i.prototype),n.prototype.constructor=n,s.prototype=Object.create(o.prototype),s.prototype.constructor=s,e.exports={ComponentError:o,ClientError:i,ImageNotFound:n,ServerError:s}},17:function(e,t,r){"use strict";var o=r(18),i=r(19),n=function e(t){this.active=!1,this.listeners=[],this.status=t&&t.status||e.statuses.MINOR};n.statuses={MAJOR:1,MINOR:2},n.prototype.onElemClick=function(e){e.target.matches(".modal-close-button")&&this.deactivate()},n.prototype.setListeners=function(){var e=this;this.listeners.forEach(function(t){e.elem.addEventListener(t.eventName,t.cb)})},n.setBackdrop=function(e){e===n.statuses.MINOR?(n.minorBackdrop=document.getElementById("backdrop_minor"),n.minorBackdrop||(n.minorBackdrop=n.renderBackdrop("minor"))):(n.majorBackdrop=document.getElementById("backdrop_major"),n.majorBackdrop||(n.majorBackdrop=n.renderBackdrop("major")))},n.setWrapper=function(e){e===n.statuses.MINOR?(n.minorWrapper=document.getElementById("modal-wrapper-minor"),n.minorWrapper||(n.minorWrapper=n.renderWrapper("minor")),n.minorWrapper.onclick=function(e){e.target&&!e.target.classList.contains("modal-wrapper_minor")||n.minorActive&&n.minorQueue[0].deactivate()}):(n.majorWrapper=document.getElementById("modal-wrapper-major"),n.majorWrapper||(n.majorWrapper=n.renderWrapper("major")),n.majorWrapper.onclick=function(e){e.target&&!e.target.classList.contains("modal-wrapper_major")||n.majorActive&&n.majorQueue[0].deactivate()})},n.renderBackdrop=function(e){var t=document.createElement("DIV");return t.className="backdrop backdrop_invisible",t.classList.add("backdrop_"+e),t.id="backdrop-"+e,document.body.appendChild(t),t},n.renderWrapper=function(e){var t=document.createElement("DIV");return t.className="modal-wrapper modal-wrapper_invisible",t.classList.add("modal-wrapper_"+e),t.id="modal-wrapper-"+e,document.body.appendChild(t),t},n.prototype.renderWindow=function(e){var t=document.createElement("DIV");t.innerHTML=e;var r=t.firstElementChild;return this.status===n.statuses.MINOR?n.minorWrapper.appendChild(r):n.majorWrapper.appendChild(r),t.remove(),r},n.prototype.show=function(){this.status===n.statuses.MINOR?(n.minorBackdrop||n.setBackdrop(n.statuses.MINOR),n.minorWrapper||n.setWrapper(n.statuses.MINOR),n.minorWrapper.classList.remove("modal-wrapper_invisible"),n.minorBackdrop.classList.remove("backdrop_invisible")):(n.majorBackdrop||n.setBackdrop(n.statuses.MAJOR),n.majorWrapper||n.setWrapper(n.statuses.MAJOR),n.majorWrapper.classList.remove("modal-wrapper_invisible"),n.majorBackdrop.classList.remove("backdrop_invisible")),this.active=!0},n.prototype.activate=function(e){var t=this;return"spinner"===this.elemId&&!function(){var e=t;t.on("spinner_host-loaded",function(r){var o=r.detail.host;t.status===n.statuses.MINOR?n.minorQueue.splice(n.minorQueue.indexOf(e)+1,0,o):n.majorQueue.splice(n.majorQueue.indexOf(e)+1,0,o),e.deactivate(r.detail.options)})}(),new Promise(function(r,o){t.status===n.statuses.MINOR?(n.minorQueue.push(t),n.minorActive?r():n.minorShow(e).then(function(){r()})):(n.majorQueue.push(t),n.majorActive?r():n.majorShow(e).then(function(){r()}))})},n.prototype.hide=function(){this.status===n.statuses.MINOR?(n.minorWrapper.classList.add("modal-wrapper_invisible"),n.minorBackdrop.classList.add("backdrop_invisible")):(n.majorWrapper.classList.add("modal-wrapper_invisible"),n.majorBackdrop.classList.add("backdrop_invisible"))},n.prototype.deactivate=function(e,t){this.hide(t),this.active=!1,this.status===n.statuses.MINOR?(n.minorActive=!1,n.minorQueue.shift(),n.minorShow(e)):(n.majorActive=!1,n.majorQueue.shift(),n.majorShow(e)),this.trigger("modal-window_deactivated")},n.minorActive=!1,n.majorActive=!1,n.minorQueue=[],n.majorQueue=[],n.spinner=new i,n.spinner.status=n.statuses.MAJOR,n.showSpinner=function(){n.prototype.show.call(n.spinner),n.spinner.elem||(n.spinner.elem=document.getElementById("spinner")),n.spinner.elem||(n.spinner.elem=n.prototype.renderWindow.call(n.spinner,i.html)),n.spinner.show()},n.hideSpinner=function(){n.spinner.hide()},n.minorShow=function(e){var t=n.minorQueue[0];if(t){var r=t.show(e);return r?r.then(function(){n.minorActive=!0}):(n.minorActive=!0,Promise.resolve())}return n.minorActive=!1,Promise.resolve()},n.majorShow=function(e){var t=n.majorQueue[0];if(t){n.showSpinner();var r=t.show(e);return r?r.then(function(){n.majorActive=!0,n.hideSpinner()}):(n.majorActive=!0,n.hideSpinner(),Promise.resolve())}return n.majorActive=!1,Promise.resolve()};for(var s in o)n.prototype[s]=o[s];e.exports=n},18:function(e,t){"use strict";e.exports={on:function(e,t){this.elem?this.elem.addEventListener(e,t):this.listeners.push({eventName:e,cb:t})},trigger:function(e,t){this.elem.dispatchEvent(new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:t}))},error:function(e){this.elem.dispatchEvent(new CustomEvent("error",{bubbles:!0,cancelable:!0,detail:e}))}}},19:function(e,t,r){"use strict";var o=function(e){this.elem=document.getElementById("spinner")};o.html=r(20),o.prototype.show=function(){this.elem.classList.remove("spinner_invisible")},o.prototype.hide=function(){this.elem.classList.add("spinner_invisible")},e.exports=o},20:function(e,t){e.exports="<div id=spinner class=spinner> </div>"},28:function(e,t){"use strict";var r=function(e){var t=this;this.elem=e.elem,this.itemList=this.elem.querySelector(".dropdown__item-list"),this.className=e.className,this.active=!1,document.body.addEventListener("click",function(e){t.itemList.contains(e.target)||(t.elem.contains(e.target)?t.toggle():t.active&&t.deactivate())},!1),this.AEHandler=this.AEHandler.bind(this)};r.prototype.show=function(){this.elem.classList.remove("dropdown_invisible"),this.elem.classList.add(this.className+"_active"),this.active=!0},r.prototype.deactivate=function(){this.itemList.addEventListener("animationend",this.AEHandler,!1),this.elem.classList.add("dropdown_fading-out")},r.prototype.AEHandler=function(){this.elem.classList.remove("dropdown_fading-out"),this.elem.classList.add("dropdown_invisible"),this.elem.classList.remove(this.className+"_active"),this.active=!1,this.itemList.removeEventListener("animationend",this.AEHandler)},r.prototype.toggle=function(){this.active?this.deactivate():this.show()},e.exports=r},29:function(e,t,r){"use strict";var o=r(18),i=r(17),n=r(19),s=function(e){n.apply(this,arguments),i.apply(this,arguments),this.elemId="spinner",this.host=null};s.prototype=Object.create(i.prototype),s.prototype.constructor=s;for(var a in n.prototype)s.prototype[a]=n.prototype[a];s.prototype.setElem=function(){this.elem||(this.elem=document.getElementById("spinner")),this.elem||(this.elem=this.renderWindow(n.html))},s.prototype.show=function(){i.prototype.show.apply(this),this.elem||this.setElem(),this.setListeners(),n.prototype.show.apply(this)},s.prototype.hide=function(){i.prototype.hide.apply(this,arguments),n.prototype.hide.apply(this,arguments)},s.prototype.deactivate=function(e){i.prototype.deactivate.apply(this,arguments)},s.prototype.onHostLoaded=function(e,t){this.trigger("spinner_host-loaded",{host:e,options:t})};for(var a in o)s.prototype[a]=o[a];e.exports=s},53:function(e,t){}});