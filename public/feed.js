!function(e){function t(r){if(i[r])return i[r].exports;var o=i[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r=window.webpackJsonp;window.webpackJsonp=function(i,n){for(var s,a,p=0,c=[];p<i.length;p++)a=i[p],o[a]&&c.push.apply(c,o[a]),o[a]=0;for(s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s]);for(r&&r(i,n);c.length;)c.shift().call(null,t)};var i={},o={2:0};return t.e=function(e,r){if(0===o[e])return r.call(null,t);if(void 0!==o[e])o[e].push(r);else{o[e]=[r];var i=document.getElementsByTagName("head")[0],n=document.createElement("script");n.type="text/javascript",n.charset="utf-8",n.async=!0,n.src=t.p+""+e+"."+({}[e]||e)+".js",i.appendChild(n)}},t.m=e,t.c=i,t.p="/",t(0)}([function(e,t,r){"use strict";function i(){return new Promise(function(e,t){r.e(3,function(t){var i=r(30);p=new i({gallery:c,isLogged:window.isLogged,preloadEntityCount:1,isEmbedded:!0,isFeed:!0}),e()})})}r(26);var o=r(14),n=(new o,r(28)),s=r(17),a=r(29),p=(new n({elem:document.getElementById("user-menu"),className:"header-element"}),void 0),c=document.getElementById("gallery");c.onclick=function(e){var t=void 0;if(t=e.target.closest(".image-preview")){var r=new a({status:s.statuses.MAJOR});r.activate(),e.preventDefault();var o=+t.dataset.id;i().then(function(){r.onHostLoaded(p,{imageId:o})})}}},,,,,,,,,,,,,,function(e,t,r){"use strict";var i=function(e){var t=this;document.addEventListener("error",function(e){var r=e.detail;t.call(r)})};i.prototype.call=function(e){r.e(1,function(t){var i=r(15).ComponentError,o=r(16);if(!(e instanceof i))throw e;if(401===e.status)localStorage.setItem("redirected_url",window.location.href),window.location="/authorization";else{var n=new o({message:e.message});n.activate()}})},e.exports=i},,,function(e,t,r){"use strict";var i=r(18),o=r(19),n=function e(t){this.active=!1,this.listeners=[],this.status=t&&t.status||e.statuses.MINOR};n.statuses={MAJOR:1,MINOR:2},n.prototype.onElemClick=function(e){e.target.matches(".modal-close-button")&&this.deactivate()},n.prototype.setListeners=function(){var e=this;this.listeners.forEach(function(t){e.elem.addEventListener(t.eventName,t.cb)})},n.setBackdrop=function(e){e===n.statuses.MINOR?(n.minorBackdrop=document.getElementById("backdrop_minor"),n.minorBackdrop||(n.minorBackdrop=n.renderBackdrop("minor"))):(n.majorBackdrop=document.getElementById("backdrop_major"),n.majorBackdrop||(n.majorBackdrop=n.renderBackdrop("major")))},n.setWrapper=function(e){e===n.statuses.MINOR?(n.minorWrapper=document.getElementById("modal-wrapper-minor"),n.minorWrapper||(n.minorWrapper=n.renderWrapper("minor")),n.minorWrapper.onclick=function(e){e.target&&!e.target.classList.contains("modal-wrapper_minor")||n.minorActive&&n.minorQueue[0].deactivate()}):(n.majorWrapper=document.getElementById("modal-wrapper-major"),n.majorWrapper||(n.majorWrapper=n.renderWrapper("major")),n.majorWrapper.onclick=function(e){e.target&&!e.target.classList.contains("modal-wrapper_major")||n.majorActive&&n.majorQueue[0].deactivate()})},n.renderBackdrop=function(e){var t=document.createElement("DIV");return t.className="backdrop backdrop_invisible",t.classList.add("backdrop_"+e),t.id="backdrop-"+e,document.body.appendChild(t),t},n.renderWrapper=function(e){var t=document.createElement("DIV");return t.className="modal-wrapper modal-wrapper_invisible",t.classList.add("modal-wrapper_"+e),t.id="modal-wrapper-"+e,document.body.appendChild(t),t},n.prototype.renderWindow=function(e){var t=document.createElement("DIV");t.innerHTML=e;var r=t.firstElementChild;return this.status===n.statuses.MINOR?n.minorWrapper.appendChild(r):n.majorWrapper.appendChild(r),t.remove(),r},n.prototype.show=function(){this.status===n.statuses.MINOR?(n.minorBackdrop||n.setBackdrop(n.statuses.MINOR),n.minorWrapper||n.setWrapper(n.statuses.MINOR),n.minorWrapper.classList.remove("modal-wrapper_invisible"),n.minorBackdrop.classList.remove("backdrop_invisible")):(n.majorBackdrop||n.setBackdrop(n.statuses.MAJOR),n.majorWrapper||n.setWrapper(n.statuses.MAJOR),n.majorWrapper.classList.remove("modal-wrapper_invisible"),n.majorBackdrop.classList.remove("backdrop_invisible")),this.active=!0},n.prototype.activate=function(e){var t=this;return"spinner"===this.elemId&&!function(){var e=t;t.on("spinner_host-loaded",function(r){var i=r.detail.host;t.status===n.statuses.MINOR?n.minorQueue.splice(n.minorQueue.indexOf(e)+1,0,i):n.majorQueue.splice(n.majorQueue.indexOf(e)+1,0,i),e.deactivate(r.detail.options)})}(),new Promise(function(r,i){t.status===n.statuses.MINOR?(n.minorQueue.push(t),n.minorActive?r():n.minorShow(e).then(function(){r()})):(n.majorQueue.push(t),n.majorActive?r():n.majorShow(e).then(function(){r()}))})},n.prototype.hide=function(){this.status===n.statuses.MINOR?(n.minorWrapper.classList.add("modal-wrapper_invisible"),n.minorBackdrop.classList.add("backdrop_invisible")):(n.majorWrapper.classList.add("modal-wrapper_invisible"),n.majorBackdrop.classList.add("backdrop_invisible"))},n.prototype.deactivate=function(e,t){this.hide(t),this.active=!1,this.status===n.statuses.MINOR?(n.minorActive=!1,n.minorQueue.shift(),n.minorShow(e)):(n.majorActive=!1,n.majorQueue.shift(),n.majorShow(e)),this.trigger("modal-window_deactivated")},n.minorActive=!1,n.majorActive=!1,n.minorQueue=[],n.majorQueue=[],n.spinner=new o,n.spinner.status=n.statuses.MAJOR,n.showSpinner=function(){n.prototype.show.call(n.spinner),n.spinner.elem||(n.spinner.elem=document.getElementById("spinner")),n.spinner.elem||(n.spinner.elem=n.prototype.renderWindow.call(n.spinner,o.html)),n.spinner.show()},n.hideSpinner=function(){n.spinner.hide()},n.minorShow=function(e){var t=n.minorQueue[0];if(t){var r=t.show(e);return r?r.then(function(){n.minorActive=!0}):(n.minorActive=!0,Promise.resolve())}return n.minorActive=!1,Promise.resolve()},n.majorShow=function(e){var t=n.majorQueue[0];if(t){n.showSpinner();var r=t.show(e);return r?r.then(function(){n.majorActive=!0,n.hideSpinner()}):(n.majorActive=!0,n.hideSpinner(),Promise.resolve())}return n.majorActive=!1,Promise.resolve()};for(var s in i)n.prototype[s]=i[s];e.exports=n},function(e,t){"use strict";e.exports={on:function(e,t){this.elem?this.elem.addEventListener(e,t):this.listeners.push({eventName:e,cb:t})},trigger:function(e,t){this.elem.dispatchEvent(new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:t}))},error:function(e){this.elem.dispatchEvent(new CustomEvent("error",{bubbles:!0,cancelable:!0,detail:e}))}}},function(e,t,r){"use strict";var i=function(e){this.elem=document.getElementById("spinner")};i.html=r(20),i.prototype.show=function(){this.elem.classList.remove("spinner_invisible")},i.prototype.hide=function(){this.elem.classList.add("spinner_invisible")},e.exports=i},function(e,t){e.exports="<div id=spinner class=spinner> </div>"},,,,,,function(e,t){},,function(e,t){"use strict";var r=function(e){var t=this;this.elem=e.elem,this.itemList=this.elem.querySelector(".dropdown__item-list"),this.className=e.className,this.active=!1,document.body.addEventListener("click",function(e){t.itemList.contains(e.target)||(t.elem.contains(e.target)?t.toggle():t.active&&t.deactivate())},!1),this.AEHandler=this.AEHandler.bind(this)};r.prototype.show=function(){this.elem.classList.remove("dropdown_invisible"),this.elem.classList.add(this.className+"_active"),this.active=!0},r.prototype.deactivate=function(){this.itemList.addEventListener("animationend",this.AEHandler,!1),this.elem.classList.add("dropdown_fading-out")},r.prototype.AEHandler=function(){this.elem.classList.remove("dropdown_fading-out"),this.elem.classList.add("dropdown_invisible"),this.elem.classList.remove(this.className+"_active"),this.active=!1,this.itemList.removeEventListener("animationend",this.AEHandler)},r.prototype.toggle=function(){this.active?this.deactivate():this.show()},e.exports=r},function(e,t,r){"use strict";var i=r(18),o=r(17),n=r(19),s=function(e){n.apply(this,arguments),o.apply(this,arguments),this.elemId="spinner",this.host=null};s.prototype=Object.create(o.prototype),s.prototype.constructor=s;for(var a in n.prototype)s.prototype[a]=n.prototype[a];s.prototype.setElem=function(){this.elem||(this.elem=document.getElementById("spinner")),this.elem||(this.elem=this.renderWindow(n.html))},s.prototype.show=function(){o.prototype.show.apply(this),this.elem||this.setElem(),this.setListeners(),n.prototype.show.apply(this)},s.prototype.hide=function(){o.prototype.hide.apply(this,arguments),n.prototype.hide.apply(this,arguments)},s.prototype.deactivate=function(e){o.prototype.deactivate.apply(this,arguments)},s.prototype.onHostLoaded=function(e,t){this.trigger("spinner_host-loaded",{host:e,options:t})};for(var a in i)s.prototype[a]=i[a];e.exports=s}]);